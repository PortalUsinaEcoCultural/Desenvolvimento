<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finalizar Compra</title>

    <link rel="stylesheet" href="/CSS/FinalizarCompra.css">
    <script src="/Javascript/Loja.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/e64e449d7c.js" crossorigin="anonymous"></script>
    <script src="https://cdn.userway.org/widget.js" data-account="9AycmX4hek"></script>
</head>
<body>
    
        <!-- Cabeçalho -->
        <div class="container-fluid">
            <div class="row">
                <div class="col-12 logo bg-white text-center p-3">
                    <a href="/Loja/Loja/Loja.html">
                        <button class="back-btn">&lt;</button>
                    </a>
                    <img src="/Login/FalaConosco/img/logo.jpg" width="66px" alt="Logo Usina Eco-Cultural">
                </div>
            </div>
        </div>
    <header>
        <h1>Resumo da Compra</h1>
    </header>
    <main>
        <div id="resumoCarrinho">
            <h2>Itens no Carrinho</h2>
            <ul id="itensCarrinho"></ul>
            <h3 id="valorTotal">Total: R$ 0,00</h3>
        </div>
    </main>
            <!--Métodos de pagamnto-->
            <div class="form-groups mt-4">
                <label class="d-block mb-2">Escolha o <strong>método de pagamento:</strong></label>
                <button type="button" class="btn btn-pagamento" id="pixBtn">PIX</button>
                <button type="button" class="btn btn-pagamento" id="paypalBtn">PayPal</button>
            </div>
            <div>
                <button type="submit" class="btn btn-continuar w-100 mt-3" id="continuarBtn">Continuar &gt;</button>
            </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const itensCarrinho = document.getElementById('itensCarrinho');
            const valorTotal = document.getElementById('valorTotal');

            // Recuperar dados do LocalStorage
            const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
            const totalAmount = parseFloat(localStorage.getItem('totalAmount')) || 0;

            // Verifica se há itens no carrinho
            if (cartItems.length > 0) {
                // Exibir os itens do carrinho
                cartItems.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = `${item.quantity}x ${item.name} - R$ ${(item.price * item.quantity).toFixed(2)}`;
                    itensCarrinho.appendChild(li);
                });

                // Exibir o valor total
                valorTotal.textContent = `Total: R$ ${totalAmount.toFixed(2)}`;
            } else {
                itensCarrinho.innerHTML = '<li>O carrinho está vazio.</li>';
                valorTotal.textContent = `Total: R$ 0,00`;
            }

            // Ação do botão "Continuar"
            document.getElementById('continuarBtn').addEventListener('click', () => {
                localStorage.removeItem('cartItems'); // Limpa os itens do carrinho
                localStorage.removeItem('totalAmount'); // Limpa o valor total
                alert('Compra finalizada com sucesso!');
                window.location.href = 'index.html'; // Redireciona para a página inicial
            });
        });
    </script>
</body>
</html>
</body>
</html>